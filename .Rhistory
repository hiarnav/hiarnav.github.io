demo()
print("Hello")
install.packages("choroplethr")
install.packages("choroplethrMaps")
library(choroplethr)
library(choroplethrMaps)
data(df_pop_state)
library(choroplethr)
cls
clear
clc
library(choroplethr)
install.packages("tidycensus")
library(tidycensus)
library(choroplethr)
library(choroplethrMaps)
data("df_pop_state")
df_pop_state
state_choropleth(df_pop_state)
pop10 <- get_decennial(geography = "state", variables = "P001001")
census_api_key("3c902aa4e02867d7059747fffd5d00d22ba57e7f", install = TRUE)
readRenviron("~/.Renviron")
pop10 <- get_decennial(geography = "state", variables = "P001001")
library(choroplethr)
library(choroplethrMaps)
library(tidycensus)
pop10 <- get_decennial(
geography = "state",
variables = "P001001"
)
pop10
income_15to19 <- get_acs(
geography = "state",
variables = "B19013_001"
)
income_15to19
library(sf)
library(tigris)
install.packages("tigris")
options(tigris_use_cache = TRUE)
ca_counties
plot(ca_counties)
install.packages("ggplot")
library(ggplot2)
ggplot2(ca_counties) + geom_sf()
ggplot(ca_counties) + geom_sf()
class(ca_counties)
class(ca_counties)
install.packages("leaflet")
library(sf)
ca_counties <- counties("CA", cb= T, progress_bar = F)
ggplot(ca_counties) + geom_sf()
knitr::opts_chunk$set(echo = F, warnings = F, messages = F)
library(censusapi)
library(tidtverse)
library(leaflet)
ca_counties <- counties("CA", cb= T, progress_bar = F)
ggplot(ca_counties) + geom_sf()
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document")
install.packages("mapview")
source("~/.active-rstudio-document")
install.packages("censusapi")
ggplot(ca_counties) + geom_sf()
setwd("~/Documents/GitHub/hiarnav.github.io")
knitr::opts_chunk$set(echo = F, warnings = F, messages = F)
library(sf)
library(tigris)
library(mapview)
library(censusapi)
library(tidyverse)
library(leaflet)
library(tidyverse)
library(plotly)
quarters <- 1:4
years <- 2017:2021
pge_elec_data <- NULL
for (year in years){
for(quarter in quarters){
if(year == 2021 && quarter > 2){
break
}
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
"Electric",
"UsageByZip.csv"
)
temp <- read_csv(filename)
pge_elec_data <- rbind(pge_elec_data, temp)
}
}
pge_elec_final <-
pge_elec_data %>%
filter(
CUSTOMERCLASS %in%
c(
"Elec- Residential",
"Elec- Commercial"
)
) %>%
select(
-c(COMBINED, AVERAGEKWH)
) %>%
mutate(
DATE =
paste(
MONTH,
"01",
YEAR,
sep="-"
) %>% as.Date()
) %>%
group_by(DATE, CUSTOMERCLASS) %>%
summarize(
TOTALKWH =
sum(
TOTALKWH,
na.rm = T
)  * 3.412,
TOTALCUSTOMERS =
sum(
TOTALCUSTOMERS,
na.rm = T
)
) %>%
mutate(
AVERAGEKWH =
TOTALKWH/TOTALCUSTOMERS
)
pge_elec_chart <-
pge_elec_final %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKWH,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "kWh",
title = "PG&E Territory Monthly Electricity Usage 2017-Present",
fill = "Electricity Type"
)
pge_elec_chart
pge_gas_data <- NULL
for (year in years){
for(quarter in quarters){
if(year == 2021 && quarter > 2){
break
}
filename <-
paste0(
"pge/PGE_",
year,
"_Q",
quarter,
"_",
"Gas",
"UsageByZip.csv"
)
temp <- read_csv(filename)
pge_gas_data <- rbind(pge_gas_data, temp)
}
}
pge_gas_final <-
pge_gas_data %>%
filter(
CUSTOMERCLASS %in%
c(
"Gas- Residential",
"Gas- Commercial"
)
) %>%
select(
-c(COMBINED, AVERAGETHM)
) %>%
mutate(
DATE =
paste(
MONTH,
"01",
YEAR,
sep="-"
) %>% as.Date()
) %>%
group_by(DATE, CUSTOMERCLASS) %>%
summarize(
TOTALTHM =
sum(
TOTALTHM,
na.rm = T
)  * 3.412,
TOTALCUSTOMERS =
sum(
TOTALCUSTOMERS,
na.rm = T
)
) %>%
mutate(
AVERAGETHM =
TOTALTHM/TOTALCUSTOMERS
)
pge_gas_chart <-
pge_gas_final %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALTHM,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "THM",
title = "PG&E Territory Monthly Gas Usage 2017-Present",
fill = "Gas Type"
)
pge_gas_chart
